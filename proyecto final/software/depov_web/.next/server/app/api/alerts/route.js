/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/alerts/route";
exports.ids = ["app/api/alerts/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Falerts%2Froute&page=%2Fapi%2Falerts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Falerts%2Froute.ts&appDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Falerts%2Froute&page=%2Fapi%2Falerts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Falerts%2Froute.ts&appDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_santi_Videos_depov_2_depov_2_depov_2_app_api_alerts_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/alerts/route.ts */ \"(rsc)/./app/api/alerts/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/alerts/route\",\n        pathname: \"/api/alerts\",\n        filename: \"route\",\n        bundlePath: \"app/api/alerts/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\santi\\\\Videos\\\\depov_2\\\\depov_2\\\\depov_2\\\\app\\\\api\\\\alerts\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_santi_Videos_depov_2_depov_2_depov_2_app_api_alerts_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/alerts/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbGVydHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFsZXJ0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFsZXJ0cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNzYW50aSU1Q1ZpZGVvcyU1Q2RlcG92XzIlNUNkZXBvdl8yJTVDZGVwb3ZfMiU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDc2FudGklNUNWaWRlb3MlNUNkZXBvdl8yJTVDZGVwb3ZfMiU1Q2RlcG92XzImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDK0I7QUFDNUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXBvdl8yLz9hZjliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHNhbnRpXFxcXFZpZGVvc1xcXFxkZXBvdl8yXFxcXGRlcG92XzJcXFxcZGVwb3ZfMlxcXFxhcHBcXFxcYXBpXFxcXGFsZXJ0c1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWxlcnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWxlcnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbGVydHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxzYW50aVxcXFxWaWRlb3NcXFxcZGVwb3ZfMlxcXFxkZXBvdl8yXFxcXGRlcG92XzJcXFxcYXBwXFxcXGFwaVxcXFxhbGVydHNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWxlcnRzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Falerts%2Froute&page=%2Fapi%2Falerts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Falerts%2Froute.ts&appDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/alerts/route.ts":
/*!*********************************!*\
  !*** ./app/api/alerts/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\n\n// Obtener todas las alertas\nasync function GET(request) {\n    try {\n        // En una implementación real, verificaríamos la autenticación aquí\n        const query = `\r\n      SELECT a.id, a.user_id, a.latitude, a.longitude, a.status, a.timestamp,\r\n             u.name as user_name, u.document, u.phone, u.address,\r\n             u.contact1_name, u.contact1_phone, u.contact2_name, u.contact2_phone\r\n      FROM alerts a\r\n      JOIN users u ON a.user_id = u.id\r\n      ORDER BY a.timestamp DESC\r\n    `;\n        const alerts = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(query);\n        // Formatear los datos para la respuesta\n        const formattedAlerts = alerts.map((alert)=>({\n                id: alert.id,\n                userId: alert.user_id,\n                timestamp: alert.timestamp,\n                location: {\n                    lat: Number.parseFloat(alert.latitude),\n                    lng: Number.parseFloat(alert.longitude)\n                },\n                status: alert.status,\n                user: {\n                    id: alert.user_id,\n                    name: alert.user_name,\n                    document: alert.document,\n                    phone: alert.phone,\n                    address: alert.address,\n                    contact1_name: alert.contact1_name,\n                    contact1_phone: alert.contact1_phone,\n                    contact2_name: alert.contact2_name,\n                    contact2_phone: alert.contact2_phone\n                }\n            }));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json(formattedAlerts);\n    } catch (error) {\n        console.error(\"Error al obtener alertas:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            error: \"Error en el servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Crear una nueva alerta\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { userId, location } = body;\n        console.log(\"Recibida solicitud de alerta en tiempo real:\", {\n            userId,\n            location\n        });\n        // Validar datos de entrada\n        if (!userId || !location || typeof location.lat !== \"number\" || typeof location.lng !== \"number\") {\n            console.log(\"Datos inv\\xe1lidos:\", {\n                userId,\n                location\n            });\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                error: \"Datos inv\\xe1lidos\"\n            }, {\n                status: 400\n            });\n        }\n        // Verificar que el usuario existe y obtener sus datos completos\n        const checkUserQuery = `\r\n      SELECT id, name, document, phone, address, \r\n             contact1_name, contact1_phone, contact2_name, contact2_phone, email\r\n      FROM users \r\n      WHERE id = ?\r\n    `;\n        const userResults = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(checkUserQuery, [\n            userId\n        ]);\n        if (userResults.length === 0) {\n            console.log(\"Usuario no encontrado:\", userId);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                error: \"Usuario no encontrado\"\n            }, {\n                status: 404\n            });\n        }\n        const userData = userResults[0];\n        console.log(\"Usuario verificado, insertando alerta con ubicaci\\xf3n en tiempo real\");\n        // Obtener la fecha y hora actual\n        const currentTimestamp = new Date().toISOString();\n        // Insertar nueva alerta con la ubicación en tiempo real\n        const insertAlertQuery = `\r\n      INSERT INTO alerts (user_id, latitude, longitude, status, timestamp)\r\n      VALUES (?, ?, ?, 'pendiente', ?)\r\n    `;\n        const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(insertAlertQuery, [\n            userId,\n            location.lat,\n            location.lng,\n            currentTimestamp\n        ]);\n        const alertId = result.insertId;\n        console.log(\"Alerta en tiempo real creada con ID:\", alertId);\n        // Encontrar los CAIs más cercanos y asignarlos\n        const findStationsQuery = `\r\n      SELECT id, name, latitude, longitude, phone,\r\n      (6371 * acos(cos(radians(?)) * cos(radians(latitude)) * cos(radians(longitude) - radians(?)) + sin(radians(?)) * sin(radians(latitude)))) AS distance\r\n      FROM police_stations\r\n      ORDER BY distance\r\n      LIMIT 3\r\n    `;\n        const nearbyStations = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(findStationsQuery, [\n            location.lat,\n            location.lng,\n            location.lat\n        ]);\n        console.log(\"Estaciones cercanas encontradas para alerta en tiempo real:\", nearbyStations.length);\n        // Asignar los CAIs cercanos a la alerta\n        const assignmentPromises = nearbyStations.map((station)=>{\n            const insertAssignmentQuery = `\r\n        INSERT INTO alert_assignments (alert_id, police_station_id, distance)\r\n        VALUES (?, ?, ?)\r\n      `;\n            return (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(insertAssignmentQuery, [\n                alertId,\n                station.id,\n                station.distance\n            ]);\n        });\n        await Promise.all(assignmentPromises);\n        console.log(\"Asignaciones completadas para alerta en tiempo real\");\n        // Formatear la respuesta para que coincida con AlertResponse\n        const response = {\n            id: alertId,\n            userId: userId,\n            timestamp: currentTimestamp,\n            location: {\n                lat: location.lat,\n                lng: location.lng\n            },\n            status: \"pendiente\",\n            user: {\n                id: userData.id,\n                name: userData.name,\n                document: userData.document,\n                phone: userData.phone,\n                address: userData.address,\n                contact1_name: userData.contact1_name,\n                contact1_phone: userData.contact1_phone,\n                contact2_name: userData.contact2_name,\n                contact2_phone: userData.contact2_phone,\n                email: userData.email\n            },\n            nearbyStations: nearbyStations.map((station)=>({\n                    id: station.id,\n                    name: station.name,\n                    distance: station.distance,\n                    location: {\n                        lat: station.latitude,\n                        lng: station.longitude\n                    },\n                    phone: station.phone || \"\" // Valor por defecto si phone es null\n                }))\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json(response, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error al crear alerta en tiempo real:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            error: \"Error en el servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNyQ0MsZ0JBQWdCVSxTQUFTVixjQUFjO2dCQUN2QzJCLE9BQU9qQixTQUFTaUIsS0FBSztZQUN2QjtZQUNBUixnQkFBZ0JBLGVBQWUxQyxHQUFHLENBQUM0QyxDQUFBQSxVQUFZO29CQUM3QzFDLElBQUkwQyxRQUFRMUMsRUFBRTtvQkFDZGEsTUFBTTZCLFFBQVE3QixJQUFJO29CQUNsQitCLFVBQVVGLFFBQVFFLFFBQVE7b0JBQzFCeEMsVUFBVTt3QkFDUkMsS0FBS3FDLFFBQVFsQyxRQUFRO3dCQUNyQkMsS0FBS2lDLFFBQVFoQyxTQUFTO29CQUN4QjtvQkFDQU0sT0FBTzBCLFFBQVExQixLQUFLLElBQUksR0FBSSxxQ0FBcUM7Z0JBQ25FO1FBQ0Y7UUFFQSxPQUFPeEIsa0ZBQVlBLENBQUM4QixJQUFJLENBQUN5QixVQUFVO1lBQUVwQyxRQUFRO1FBQUk7SUFFbkQsRUFBRSxPQUFPWSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx5Q0FBeUNBO1FBQ3ZELE9BQU8vQixrRkFBWUEsQ0FBQzhCLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXVCLEdBQUc7WUFBRVosUUFBUTtRQUFJO0lBQzVFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXBvdl8yLy4vYXBwL2FwaS9hbGVydHMvcm91dGUudHM/YjQ0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGVjdXRlUXVlcnkgfSBmcm9tIFwiQC9saWIvZGJcIlxyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxyXG5cclxuLy8gT2J0ZW5lciB0b2RhcyBsYXMgYWxlcnRhc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRW4gdW5hIGltcGxlbWVudGFjacOzbiByZWFsLCB2ZXJpZmljYXLDrWFtb3MgbGEgYXV0ZW50aWNhY2nDs24gYXF1w61cclxuXHJcbiAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIGEuaWQsIGEudXNlcl9pZCwgYS5sYXRpdHVkZSwgYS5sb25naXR1ZGUsIGEuc3RhdHVzLCBhLnRpbWVzdGFtcCxcclxuICAgICAgICAgICAgIHUubmFtZSBhcyB1c2VyX25hbWUsIHUuZG9jdW1lbnQsIHUucGhvbmUsIHUuYWRkcmVzcyxcclxuICAgICAgICAgICAgIHUuY29udGFjdDFfbmFtZSwgdS5jb250YWN0MV9waG9uZSwgdS5jb250YWN0Ml9uYW1lLCB1LmNvbnRhY3QyX3Bob25lXHJcbiAgICAgIEZST00gYWxlcnRzIGFcclxuICAgICAgSk9JTiB1c2VycyB1IE9OIGEudXNlcl9pZCA9IHUuaWRcclxuICAgICAgT1JERVIgQlkgYS50aW1lc3RhbXAgREVTQ1xyXG4gICAgYFxyXG5cclxuICAgIGNvbnN0IGFsZXJ0cyA9IChhd2FpdCBleGVjdXRlUXVlcnkocXVlcnkpKSBhcyBhbnlbXVxyXG5cclxuICAgIC8vIEZvcm1hdGVhciBsb3MgZGF0b3MgcGFyYSBsYSByZXNwdWVzdGFcclxuICAgIGNvbnN0IGZvcm1hdHRlZEFsZXJ0cyA9IGFsZXJ0cy5tYXAoKGFsZXJ0KSA9PiAoe1xyXG4gICAgICBpZDogYWxlcnQuaWQsXHJcbiAgICAgIHVzZXJJZDogYWxlcnQudXNlcl9pZCxcclxuICAgICAgdGltZXN0YW1wOiBhbGVydC50aW1lc3RhbXAsXHJcbiAgICAgIGxvY2F0aW9uOiB7XHJcbiAgICAgICAgbGF0OiBOdW1iZXIucGFyc2VGbG9hdChhbGVydC5sYXRpdHVkZSksXHJcbiAgICAgICAgbG5nOiBOdW1iZXIucGFyc2VGbG9hdChhbGVydC5sb25naXR1ZGUpLFxyXG4gICAgICB9LFxyXG4gICAgICBzdGF0dXM6IGFsZXJ0LnN0YXR1cyxcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIGlkOiBhbGVydC51c2VyX2lkLFxyXG4gICAgICAgIG5hbWU6IGFsZXJ0LnVzZXJfbmFtZSxcclxuICAgICAgICBkb2N1bWVudDogYWxlcnQuZG9jdW1lbnQsXHJcbiAgICAgICAgcGhvbmU6IGFsZXJ0LnBob25lLFxyXG4gICAgICAgIGFkZHJlc3M6IGFsZXJ0LmFkZHJlc3MsXHJcbiAgICAgICAgY29udGFjdDFfbmFtZTogYWxlcnQuY29udGFjdDFfbmFtZSxcclxuICAgICAgICBjb250YWN0MV9waG9uZTogYWxlcnQuY29udGFjdDFfcGhvbmUsXHJcbiAgICAgICAgY29udGFjdDJfbmFtZTogYWxlcnQuY29udGFjdDJfbmFtZSxcclxuICAgICAgICBjb250YWN0Ml9waG9uZTogYWxlcnQuY29udGFjdDJfcGhvbmUsXHJcbiAgICAgIH0sXHJcbiAgICB9KSlcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZm9ybWF0dGVkQWxlcnRzKVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgb2J0ZW5lciBhbGVydGFzOlwiLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkVycm9yIGVuIGVsIHNlcnZpZG9yXCIgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXIgdW5hIG51ZXZhIGFsZXJ0YVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgY29uc3QgeyB1c2VySWQsIGxvY2F0aW9uIH0gPSBib2R5XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJSZWNpYmlkYSBzb2xpY2l0dWQgZGUgYWxlcnRhIGVuIHRpZW1wbyByZWFsOlwiLCB7IHVzZXJJZCwgbG9jYXRpb24gfSlcclxuXHJcbiAgICAvLyBWYWxpZGFyIGRhdG9zIGRlIGVudHJhZGFcclxuICAgIGlmICghdXNlcklkIHx8ICFsb2NhdGlvbiB8fCB0eXBlb2YgbG9jYXRpb24ubGF0ICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBsb2NhdGlvbi5sbmcgIT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJEYXRvcyBpbnbDoWxpZG9zOlwiLCB7IHVzZXJJZCwgbG9jYXRpb24gfSlcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiRGF0b3MgaW52w6FsaWRvc1wiIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZmljYXIgcXVlIGVsIHVzdWFyaW8gZXhpc3RlIHkgb2J0ZW5lciBzdXMgZGF0b3MgY29tcGxldG9zXHJcbiAgICBjb25zdCBjaGVja1VzZXJRdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIGlkLCBuYW1lLCBkb2N1bWVudCwgcGhvbmUsIGFkZHJlc3MsIFxyXG4gICAgICAgICAgICAgY29udGFjdDFfbmFtZSwgY29udGFjdDFfcGhvbmUsIGNvbnRhY3QyX25hbWUsIGNvbnRhY3QyX3Bob25lLCBlbWFpbFxyXG4gICAgICBGUk9NIHVzZXJzIFxyXG4gICAgICBXSEVSRSBpZCA9ID9cclxuICAgIGBcclxuICAgIGNvbnN0IHVzZXJSZXN1bHRzID0gKGF3YWl0IGV4ZWN1dGVRdWVyeShjaGVja1VzZXJRdWVyeSwgW3VzZXJJZF0pKSBhcyBhbnlbXVxyXG5cclxuICAgIGlmICh1c2VyUmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coXCJVc3VhcmlvIG5vIGVuY29udHJhZG86XCIsIHVzZXJJZClcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVXN1YXJpbyBubyBlbmNvbnRyYWRvXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclJlc3VsdHNbMF1cclxuICAgIGNvbnNvbGUubG9nKFwiVXN1YXJpbyB2ZXJpZmljYWRvLCBpbnNlcnRhbmRvIGFsZXJ0YSBjb24gdWJpY2FjacOzbiBlbiB0aWVtcG8gcmVhbFwiKVxyXG5cclxuICAgIC8vIE9idGVuZXIgbGEgZmVjaGEgeSBob3JhIGFjdHVhbFxyXG4gICAgY29uc3QgY3VycmVudFRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG5cclxuICAgIC8vIEluc2VydGFyIG51ZXZhIGFsZXJ0YSBjb24gbGEgdWJpY2FjacOzbiBlbiB0aWVtcG8gcmVhbFxyXG4gICAgY29uc3QgaW5zZXJ0QWxlcnRRdWVyeSA9IGBcclxuICAgICAgSU5TRVJUIElOVE8gYWxlcnRzICh1c2VyX2lkLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBzdGF0dXMsIHRpbWVzdGFtcClcclxuICAgICAgVkFMVUVTICg/LCA/LCA/LCAncGVuZGllbnRlJywgPylcclxuICAgIGBcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgZXhlY3V0ZVF1ZXJ5KGluc2VydEFsZXJ0UXVlcnksIFtcclxuICAgICAgdXNlcklkLCBcclxuICAgICAgbG9jYXRpb24ubGF0LCBcclxuICAgICAgbG9jYXRpb24ubG5nLCBcclxuICAgICAgY3VycmVudFRpbWVzdGFtcFxyXG4gICAgXSkpIGFzIGFueVxyXG5cclxuICAgIGNvbnN0IGFsZXJ0SWQgPSByZXN1bHQuaW5zZXJ0SWRcclxuICAgIGNvbnNvbGUubG9nKFwiQWxlcnRhIGVuIHRpZW1wbyByZWFsIGNyZWFkYSBjb24gSUQ6XCIsIGFsZXJ0SWQpXHJcblxyXG4gICAgLy8gRW5jb250cmFyIGxvcyBDQUlzIG3DoXMgY2VyY2Fub3MgeSBhc2lnbmFybG9zXHJcbiAgICBjb25zdCBmaW5kU3RhdGlvbnNRdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIGlkLCBuYW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBwaG9uZSxcclxuICAgICAgKDYzNzEgKiBhY29zKGNvcyhyYWRpYW5zKD8pKSAqIGNvcyhyYWRpYW5zKGxhdGl0dWRlKSkgKiBjb3MocmFkaWFucyhsb25naXR1ZGUpIC0gcmFkaWFucyg/KSkgKyBzaW4ocmFkaWFucyg/KSkgKiBzaW4ocmFkaWFucyhsYXRpdHVkZSkpKSkgQVMgZGlzdGFuY2VcclxuICAgICAgRlJPTSBwb2xpY2Vfc3RhdGlvbnNcclxuICAgICAgT1JERVIgQlkgZGlzdGFuY2VcclxuICAgICAgTElNSVQgM1xyXG4gICAgYFxyXG5cclxuICAgIGNvbnN0IG5lYXJieVN0YXRpb25zID0gKGF3YWl0IGV4ZWN1dGVRdWVyeShmaW5kU3RhdGlvbnNRdWVyeSwgW2xvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG5nLCBsb2NhdGlvbi5sYXRdKSkgYXMgYW55W11cclxuICAgIGNvbnNvbGUubG9nKFwiRXN0YWNpb25lcyBjZXJjYW5hcyBlbmNvbnRyYWRhcyBwYXJhIGFsZXJ0YSBlbiB0aWVtcG8gcmVhbDpcIiwgbmVhcmJ5U3RhdGlvbnMubGVuZ3RoKVxyXG5cclxuICAgIC8vIEFzaWduYXIgbG9zIENBSXMgY2VyY2Fub3MgYSBsYSBhbGVydGFcclxuICAgIGNvbnN0IGFzc2lnbm1lbnRQcm9taXNlcyA9IG5lYXJieVN0YXRpb25zLm1hcCgoc3RhdGlvbikgPT4ge1xyXG4gICAgICBjb25zdCBpbnNlcnRBc3NpZ25tZW50UXVlcnkgPSBgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gYWxlcnRfYXNzaWdubWVudHMgKGFsZXJ0X2lkLCBwb2xpY2Vfc3RhdGlvbl9pZCwgZGlzdGFuY2UpXHJcbiAgICAgICAgVkFMVUVTICg/LCA/LCA/KVxyXG4gICAgICBgXHJcblxyXG4gICAgICByZXR1cm4gZXhlY3V0ZVF1ZXJ5KGluc2VydEFzc2lnbm1lbnRRdWVyeSwgW2FsZXJ0SWQsIHN0YXRpb24uaWQsIHN0YXRpb24uZGlzdGFuY2VdKVxyXG4gICAgfSlcclxuXHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbChhc3NpZ25tZW50UHJvbWlzZXMpXHJcbiAgICBjb25zb2xlLmxvZyhcIkFzaWduYWNpb25lcyBjb21wbGV0YWRhcyBwYXJhIGFsZXJ0YSBlbiB0aWVtcG8gcmVhbFwiKVxyXG5cclxuICAgIC8vIEZvcm1hdGVhciBsYSByZXNwdWVzdGEgcGFyYSBxdWUgY29pbmNpZGEgY29uIEFsZXJ0UmVzcG9uc2VcclxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICBpZDogYWxlcnRJZCxcclxuICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgIHRpbWVzdGFtcDogY3VycmVudFRpbWVzdGFtcCxcclxuICAgICAgbG9jYXRpb246IHtcclxuICAgICAgICBsYXQ6IGxvY2F0aW9uLmxhdCxcclxuICAgICAgICBsbmc6IGxvY2F0aW9uLmxuZ1xyXG4gICAgICB9LFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaWVudGUnLFxyXG4gICAgICB1c2VyOiB7XHJcbiAgICAgICAgaWQ6IHVzZXJEYXRhLmlkLFxyXG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgICAgZG9jdW1lbnQ6IHVzZXJEYXRhLmRvY3VtZW50LFxyXG4gICAgICAgIHBob25lOiB1c2VyRGF0YS5waG9uZSxcclxuICAgICAgICBhZGRyZXNzOiB1c2VyRGF0YS5hZGRyZXNzLFxyXG4gICAgICAgIGNvbnRhY3QxX25hbWU6IHVzZXJEYXRhLmNvbnRhY3QxX25hbWUsXHJcbiAgICAgICAgY29udGFjdDFfcGhvbmU6IHVzZXJEYXRhLmNvbnRhY3QxX3Bob25lLFxyXG4gICAgICAgIGNvbnRhY3QyX25hbWU6IHVzZXJEYXRhLmNvbnRhY3QyX25hbWUsXHJcbiAgICAgICAgY29udGFjdDJfcGhvbmU6IHVzZXJEYXRhLmNvbnRhY3QyX3Bob25lLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbFxyXG4gICAgICB9LFxyXG4gICAgICBuZWFyYnlTdGF0aW9uczogbmVhcmJ5U3RhdGlvbnMubWFwKHN0YXRpb24gPT4gKHtcclxuICAgICAgICBpZDogc3RhdGlvbi5pZCxcclxuICAgICAgICBuYW1lOiBzdGF0aW9uLm5hbWUsXHJcbiAgICAgICAgZGlzdGFuY2U6IHN0YXRpb24uZGlzdGFuY2UsXHJcbiAgICAgICAgbG9jYXRpb246IHtcclxuICAgICAgICAgIGxhdDogc3RhdGlvbi5sYXRpdHVkZSxcclxuICAgICAgICAgIGxuZzogc3RhdGlvbi5sb25naXR1ZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBob25lOiBzdGF0aW9uLnBob25lIHx8IFwiXCIgIC8vIFZhbG9yIHBvciBkZWZlY3RvIHNpIHBob25lIGVzIG51bGxcclxuICAgICAgfSkpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogMjAxIH0pXHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNyZWFyIGFsZXJ0YSBlbiB0aWVtcG8gcmVhbDpcIiwgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJFcnJvciBlbiBlbCBzZXJ2aWRvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiZXhlY3V0ZVF1ZXJ5IiwiTmV4dFJlc3BvbnNlIiwiR0VUIiwicmVxdWVzdCIsInF1ZXJ5IiwiYWxlcnRzIiwiZm9ybWF0dGVkQWxlcnRzIiwibWFwIiwiYWxlcnQiLCJpZCIsInVzZXJJZCIsInVzZXJfaWQiLCJ0aW1lc3RhbXAiLCJsb2NhdGlvbiIsImxhdCIsIk51bWJlciIsInBhcnNlRmxvYXQiLCJsYXRpdHVkZSIsImxuZyIsImxvbmdpdHVkZSIsInN0YXR1cyIsInVzZXIiLCJuYW1lIiwidXNlcl9uYW1lIiwiZG9jdW1lbnQiLCJwaG9uZSIsImFkZHJlc3MiLCJjb250YWN0MV9uYW1lIiwiY29udGFjdDFfcGhvbmUiLCJjb250YWN0Ml9uYW1lIiwiY29udGFjdDJfcGhvbmUiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiUE9TVCIsImJvZHkiLCJsb2ciLCJjaGVja1VzZXJRdWVyeSIsInVzZXJSZXN1bHRzIiwibGVuZ3RoIiwidXNlckRhdGEiLCJjdXJyZW50VGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiaW5zZXJ0QWxlcnRRdWVyeSIsInJlc3VsdCIsImFsZXJ0SWQiLCJpbnNlcnRJZCIsImZpbmRTdGF0aW9uc1F1ZXJ5IiwibmVhcmJ5U3RhdGlvbnMiLCJhc3NpZ25tZW50UHJvbWlzZXMiLCJzdGF0aW9uIiwiaW5zZXJ0QXNzaWdubWVudFF1ZXJ5IiwiZGlzdGFuY2UiLCJQcm9taXNlIiwiYWxsIiwicmVzcG9uc2UiLCJlbWFpbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/alerts/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\n// Configuración de la conexión a la base de datos\nconst dbConfig = {\n    host: \"localhost\",\n    user: \"root\",\n    password: \"\",\n    database: \"emergency_alert_system2\"\n};\n// Función para crear una conexión a la base de datos\nasync function connectToDatabase() {\n    try {\n        const connection = await mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createConnection(dbConfig);\n        return connection;\n    } catch (error) {\n        console.error(\"Error al conectar a la base de datos:\", error);\n        throw new Error(\"No se pudo conectar a la base de datos\");\n    }\n}\n// Función para ejecutar una consulta SQL\nasync function executeQuery(query, params = []) {\n    let connection;\n    try {\n        connection = await connectToDatabase();\n        const [results] = await connection.execute(query, params);\n        return results;\n    } catch (error) {\n        console.error(\"Error al ejecutar la consulta:\", error);\n        throw error;\n    } finally{\n        if (connection) {\n            await connection.end();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWtDO0FBRWxDLGtEQUFrRDtBQUNsRCxNQUFNQyxXQUFXO0lBQ2ZDLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0lBQ1ZDLFVBQVU7QUFDWjtBQUVBLHFEQUFxRDtBQUM5QyxlQUFlQztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsYUFBYSxNQUFNUCw0REFBc0IsQ0FBQ0M7UUFDaEQsT0FBT007SUFDVCxFQUFFLE9BQU9FLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlDQUF5Q0E7UUFDdkQsTUFBTSxJQUFJRSxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQSx5Q0FBeUM7QUFDbEMsZUFBZUMsYUFBYUMsS0FBYSxFQUFFQyxTQUFnQixFQUFFO0lBQ2xFLElBQUlQO0lBRUosSUFBSTtRQUNGQSxhQUFhLE1BQU1EO1FBQ25CLE1BQU0sQ0FBQ1MsUUFBUSxHQUFHLE1BQU1SLFdBQVdTLE9BQU8sQ0FBQ0gsT0FBT0M7UUFDbEQsT0FBT0M7SUFDVCxFQUFFLE9BQU9OLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsTUFBTUE7SUFDUixTQUFVO1FBQ1IsSUFBSUYsWUFBWTtZQUNkLE1BQU1BLFdBQVdVLEdBQUc7UUFDdEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVwb3ZfMi8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIlxyXG5cclxuLy8gQ29uZmlndXJhY2nDs24gZGUgbGEgY29uZXhpw7NuIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG5jb25zdCBkYkNvbmZpZyA9IHtcclxuICBob3N0OiBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IFwicm9vdFwiLFxyXG4gIHBhc3N3b3JkOiBcIlwiLFxyXG4gIGRhdGFiYXNlOiBcImVtZXJnZW5jeV9hbGVydF9zeXN0ZW0yXCIsXHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgY3JlYXIgdW5hIGNvbmV4acOzbiBhIGxhIGJhc2UgZGUgZGF0b3NcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb0RhdGFiYXNlKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgbXlzcWwuY3JlYXRlQ29ubmVjdGlvbihkYkNvbmZpZylcclxuICAgIHJldHVybiBjb25uZWN0aW9uXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjb25lY3RhciBhIGxhIGJhc2UgZGUgZGF0b3M6XCIsIGVycm9yKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBjb25lY3RhciBhIGxhIGJhc2UgZGUgZGF0b3NcIilcclxuICB9XHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgZWplY3V0YXIgdW5hIGNvbnN1bHRhIFNRTFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIHBhcmFtczogYW55W10gPSBbXSkge1xyXG4gIGxldCBjb25uZWN0aW9uXHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25uZWN0aW9uID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKVxyXG4gICAgY29uc3QgW3Jlc3VsdHNdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKHF1ZXJ5LCBwYXJhbXMpXHJcbiAgICByZXR1cm4gcmVzdWx0c1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZWplY3V0YXIgbGEgY29uc3VsdGE6XCIsIGVycm9yKVxyXG4gICAgdGhyb3cgZXJyb3JcclxuICB9IGZpbmFsbHkge1xyXG4gICAgaWYgKGNvbm5lY3Rpb24pIHtcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5lbmQoKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIm15c3FsIiwiZGJDb25maWciLCJob3N0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJjb25uZWN0VG9EYXRhYmFzZSIsImNvbm5lY3Rpb24iLCJjcmVhdGVDb25uZWN0aW9uIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJleGVjdXRlUXVlcnkiLCJxdWVyeSIsInBhcmFtcyIsInJlc3VsdHMiLCJleGVjdXRlIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/lru-cache","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/named-placeholders","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Falerts%2Froute&page=%2Fapi%2Falerts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Falerts%2Froute.ts&appDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Csanti%5CVideos%5Cdepov_2%5Cdepov_2%5Cdepov_2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();